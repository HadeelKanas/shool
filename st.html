<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Students</title>
    <link rel="stylesheet" href="css/st.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>    
</head>
<body onload="getData()">
    <div class="container"> 
         <!-- nav bar---------------------------->
         <nav>
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="school-outline"></ion-icon>
                        </span>
                        <span class="title">logo</span>
                        <!-- <img src="/images/logo.png" width="50px" height="50px"  > -->
                    </a>
                </li>
                <li>
                    <a href="./Home.html">
                        <span class="icon">
                            <ion-icon name="home-outline"></ion-icon>
                        </span>
                        <span class="title">Home</span>
                    </a>
                </li>
                <li class="hovered">
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="accessibility-outline"></ion-icon>
                        </span>
                        <span class="title">Students</span>
                    </a>
                </li>
                <li>
                    <a href="./teachers.html">
                        <span class="icon">
                            <ion-icon name="pencil-outline"></ion-icon>
                        </span>
                        <span class="title">Teachers</span>
                    </a>
                </li>
                <li>
                    <a href="./employees.html">
                        <span class="icon">
                            <ion-icon name="desktop-outline"></ion-icon>
                        </span>
                        <span class="title">Employees</span>
                    </a>
                </li>
                <li>
                    <a href="./programs.html">
                        <span class="icon">
                            <ion-icon name="reader-outline"></ion-icon>
                        </span>
                        <span class="title">Programs</span>
                    </a>
                </li>
                <li>
                    <a href="./calender.html">
                        <span class="icon">
                            <ion-icon name="calendar-number-outline"></ion-icon>
                        </span>
                        <span class="title">Calender</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Signout</span>
                    </a>
                </li>
            </ul>

        </nav>
        <!-- main------------------------------------------------------------ -->
        <div class="main">
            <!-- tog -->
            <div class="toggle">
                <ion-icon name="menu-outline" role="img" class="md hydrated" aria-label="menu outline"></ion-icon>

            </div>

            <div class="rad-btn">
                <input type="radio" name="buttonGroup" value="one" id="one" checked><label for="one">Activity</label>
                <input type="radio" name="buttonGroup" value="two" id="two"><label for="two">Marks</label>
            </div> 
            
            <div class="activity">
                <div class="date">1/1/2022</div>   
                <div class="subject">Maths</div>   
                <div class="teacher">Ahmad</div>   
                <div class="result">Your child did'nt do the homework today</div>   
            </div>



             <!-- table--------------------------------
             <div class="t">Term 1:</div>
             <table class="term">
                <tr>
                    <th>Subject</th>
                    <th>Fullmark</th>
                    <th>Q1</th>
                    <th>Q2</th>
                    <th>Avg</th>
                    
                </tr>
                <tr>
                    <td>Maths</td>
                    <td>100</td>
                    <td>70</td>
                    <td>80</td>
                    <td>60</td>

                          
                </tr>
                <tr>
                    <td>Maths</td>
                    <td>100</td>
                    <td>70</td>
                    <td>80</td>
                    <td>60</td>

                          
                </tr>
                <tr>
                    <td>Maths</td>
                    <td>100</td>
                    <td>70</td>
                    <td>80</td>
                    <td>60</td>

                          
                </tr>
            </table>

            <div class="t">Term 2:</div>
            <table class="term">
                <tr>
                    <th>Subject</th>
                    <th>Fullmark</th>
                    <th>Q1</th>
                    <th>Q2</th>
                    <th>Avg</th>
                    
                </tr>
                <tr>
                    <td>Maths</td>
                    <td>100</td>
                    <td>70</td>
                    <td>80</td>
                    <td>60</td>
                          
                </tr>

            </table>

          
                  
        

            
        </div> -->
        <!-- side bar ------------------ -->
            
            <aside>
                <div class="profile">
                    <div class="user">
                        <img src="images//student.jpg" alt="">
                    </div>
                    <div id="student-name" class="name">leen Ali</div>
        
                </div>
                <div id="info" class="info">
                   <!-- <p> father: Ahmad</p>
                    <p>Mother: Sama Ali</p>                    
                    <p> Age: 12</p>
                    <p> Birthday: 1/1/2005</p>
                    <p>Adress: Damascus-AlMazzeh</p>
                    <p> Phone number: 09********</p> -->
                    <p id="act">Active</p>
        
                    <div class="attend">
                        <div class="one"><p>68</p></div>
                        <div class="two"><p>3</p></div>
                        <div class="three"><p>0</p></div>
                    </div>
        
                    <div class="contact">
                        <label>Student behavior</label>
                        <div class="date">1/1/2022</div>
                        <textarea id="" class="text" rows="4" placeholder="Write here..."></textarea>
                        <button onclick="" id="">Send</button>
                    </div>                                  
                                       
                    <div class="btn">
                        <button onclick="" id="">Edit</button>
                        
                    </div>
                </div>
            </aside>   
                   
                   
             
            
        </div>
        




    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script>
        // add hovered class to selected list item
        let list = document.querySelectorAll("nav li");

        function activeLink() {
            list.forEach((item) =>
                item.classList.remove('hovered'));
            this.classList.add('hovered');
        }

        list.forEach((item) => item.addEventListener("mouseover", activeLink));

        // Menu Toggle
        let toggle = document.querySelector('.toggle');
        let navigation = document.querySelector('nav');
        let main = document.querySelector('.main');

        toggle.onclick = function () {
            navigation.classList.toggle('active');
            main.classList.toggle('active');
        };

        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        function getData(){
            const student = getParameterByName("student")
            console.log(student)
            axios.get(`http://192.168.43.203:8000/en/api/v1/student/?search=${student}`, {
                    headers: {
                        Authorization: "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjkxNDIxMjUyLCJpYXQiOjE2NTk4ODUyNTIsImp0aSI6IjU5NzA1MTk4NGIxMjRlZTNiYjY3ZTFjOThmOWQ5ZmU3IiwidXNlcl9pZCI6MX0.IUUIMaWqC0EBvixOd-vP-Wh2woApeO_oj35pJvTJS2w"
                    }
                }
            ).then(res => {
                const studentInfo = res.data.results[0]
                console.log(studentInfo)
                const info = document.getElementById("info")
                const sname = document.getElementById("student-name")
                sname.innerHTML = studentInfo.first_name + " " + studentInfo.last_name
                info.innerHTML = `
                    <p> father: ${studentInfo.father_name}</p>
                    <p>Mother: ${studentInfo.mother_name}</p>                    
                    <p> Birthday: ${studentInfo.birthday}</p>
                    <p>Adress: ${studentInfo.address}</p>
                    <p> Phone number: ${studentInfo.phone}</p>
                    <p id="act">Active</p>
                `
                axios.get(`http://192.168.43.203:8000/en/api/v1/student-attendance/${studentInfo.id}`, {
                    headers: {
                        Authorization: "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjkxNDIxMjUyLCJpYXQiOjE2NTk4ODUyNTIsImp0aSI6IjU5NzA1MTk4NGIxMjRlZTNiYjY3ZTFjOThmOWQ5ZmU3IiwidXNlcl9pZCI6MX0.IUUIMaWqC0EBvixOd-vP-Wh2woApeO_oj35pJvTJS2w"
                    }
                }).then(res => {
                    info.innerHTML += `
                        
                    <div class="attend">
                        <div class="one"><p>${res.data[0].count}</p></div>
                        <div class="two"><p>${res.data[1].count}</p></div>
                        <div class="three"><p>${res.data[2].count}</p></div>
                    </div>
        
                    <div class="contact">
                        <label>Student behavior</label>
                        <div class="date">1/1/2022</div>
                        <textarea id="" class="text" rows="4" placeholder="Write here..."></textarea>
                        <button onclick="" id="">Send</button>
                    </div>                                  
                                       
                    <div class="btn">
                        <button onclick="" id="">Edit</button>
                        
                    </div>
                    `
                })
            })
        }
    </script>    
</body> 
</html>   